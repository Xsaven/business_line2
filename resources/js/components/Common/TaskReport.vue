<template>
    <div :class="{task_wrap: report.comments.length}">
        <div class="task">
            <div class="head">
                <div class="title">
                    <a :href="`/task/${report.task.id}`">{{report.task.name}}</a>
                </div>

                <div class="date">{{String(report.month).split('-')[1]}} {{month[String(report.month).split('-')[1]]}} {{String(report.time)}}</div>
            </div>

            <div class="author">
                <div class="avatar" v-html="report.user.avatar">
                </div>

                <div>
                    <div class="name">{{report.user.name}}</div>
                    <div class="text">{{report.comment}}</div>
                </div>
            </div>

            <div class="video" v-for="image in report.files">
                <img :src="image" alt="" class="lozad">
                <!--                <svg class="icon"><use xlink:href="/images/sprite.svg#ic_video_play"></use></svg>-->
            </div>

            <div class="bottom">
                <button :class="{like_btn: true, active: user.liked_comment_ids.indexOf(report.id) !== -1}" type="button" @click="like">
                    <span>{{report.likes}}</span>
                    <v-icon icon="ic_like" />
                    <v-icon icon="ic_like_a" />
                </button>

                <v-home-smiles-commentary v-if="!report.comments.length" :show_smiles="false" :show_stickers="true" />
            </div>
        </div>


        <div class="dialog" v-if="report.comments.length">
            <div class="messages">
                <div class="message">
                    <div class="user">
                        <div class="avatar">
                            <span>–ê–í</span>
                            <img data-src="/images/tmp/user_avatar.jpg" alt="" class="lozad">
                        </div>

                        <div>
                            <div class="name">
                                <a href="/">–ê–ª–µ–Ω–∞ –í–∞—Å–∏–ª—å–µ–≤–∞</a>
                            </div>
                            <div class="date">21 –∞–≤–≥—É—Å—Ç–∞ 18:47</div>
                        </div>
                    </div>

                    <div class="text">
                        <img src="/images/tmp/dialog_img.jpg" alt="">
                    </div>
                </div>

                <div class="message">
                    <div class="user">
                        <div class="avatar">
                            <span>–ê–ù</span>
                        </div>

                        <div>
                            <div class="name">
                                <a href="/">–ê–ª–µ–∫—Å–µ–π –ù–∏–∫–æ–ª–∞–µ...</a>
                            </div>
                            <div class="date">21 –∞–≤–≥—É—Å—Ç–∞ 18:47</div>
                        </div>
                    </div>

                    <div class="text">
                        üòÄ
                    </div>
                </div>
            </div>

            <div class="add_message">
                <v-home-smiles-commentary :smiles="false" />
            </div>
        </div>
    </div>
</template>

<script>
    export default {
        $sync: ['user'],
        name: "v-task-report",
        props: {
            report: {required: true},
        },
        data () {
            return {
                user: {},
                month: {
                    '01': '—è–Ω–≤–∞—Ä—è',
                    '02': '—Ñ–µ–≤—Ä–∞–ª—è',
                    '03': '–º–∞—Ä—Ç–∞',
                    '04': '–∞–ø—Ä–µ–ª—è',
                    '05': '–º–∞—è',
                    '06': '–∏—é–Ω—è',
                    '07': '–∏—é–ª—è',
                    '08': '–∞–≤–≥—É—Å—Ç–∞',
                    '09': '—Å–µ–Ω—Ç—è–±—Ä—è',
                    '10': '–æ–∫—Ç—è–±—Ä—è',
                    '11': '–Ω–æ—è–±—Ä—è',
                    '12': '–¥–µ–∫–∞–±—Ä—è',
                },
            };
        },
        mounted () {},
        computed: {},
        watch: {},
        methods: {
            like () {

            }
        }
    }
</script>
